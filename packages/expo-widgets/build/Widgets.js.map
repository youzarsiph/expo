{"version":3,"file":"Widgets.js","sourceRoot":"","sources":["../src/Widgets.ts"],"names":[],"mappings":"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","sourcesContent":["import { type EventSubscription } from 'expo-modules-core';\nimport React from 'react';\n\nimport ExpoWidgetModule from './ExpoWidgets';\nimport {\n  ExpoLiveActivityEntry,\n  ExpoWidgetsEvents,\n  LiveActivityDismissalPolicy,\n  LiveActivityInfo,\n  WidgetBase,\n} from './Widgets.types';\n\n/**\n * Starts a new Live Activity on iOS.\n * Live Activities display real-time information on the Lock Screen and in the Dynamic Island.\n * @param name The name/identifier of the Live Activity to start.\n * @param props Optional props to pass to the Live Activity layout.\n * @param url An optional deep link URL to open when the user taps the Live Activity.\n * @return The unique identifier of the started Live Activity.\n */\nexport const startLiveActivity = (name: string, props?: object, url?: string) => {\n  const propsString = props ? JSON.stringify(props) : '{}';\n  return ExpoWidgetModule.startLiveActivity(name, propsString, url);\n};\n\n/**\n * Updates an existing Live Activity with new content.\n * @param id The unique identifier of the Live Activity to update (returned from `startLiveActivity`).\n * @param name The name/identifier of the Live Activity.\n * @param props Optional props to pass to the Live Activity layout.\n */\nexport const updateLiveActivity = (id: string, name: string, props?: object) => {\n  const propsString = props ? JSON.stringify(props) : '{}';\n  ExpoWidgetModule.updateLiveActivity(id, name, propsString);\n};\n\n/**\n * Updates a widget's timeline with multiple entries that will be displayed at scheduled times.\n * The widget system will automatically switch between entries based on their timestamps.\n * @param name The name/identifier of the widget to update.\n * @param timeline Timeline entries with the dates and optional props for each entry.\n * @template T The type of custom props passed to the widget.\n */\nexport const updateWidgetTimeline = <T extends object>(\n  name: string,\n  timeline: { date: Date; props?: T }[]\n) => {\n  ExpoWidgetModule.updateWidgetTimeline(\n    name,\n    timeline.map((entry) => ({\n      timestamp: entry.date.getTime(),\n      props: entry.props || {},\n    }))\n  );\n\n  ExpoWidgetModule.reloadWidget();\n};\n\n/**\n * Updates a widget with a single snapshot entry for the current time.\n * This is a convenience wrapper around `updateWidgetTimeline` for widgets that don't need multiple timeline entries.\n * @param name The name/identifier of the widget to update.\n * @param props Optional custom props to pass to the widget component.\n * @template T The type of custom props passed to the widget.\n */\nexport const updateWidgetSnapshot = <T extends object>(name: string, props?: T) => {\n  updateWidgetTimeline(name, [{ date: new Date(), props }]);\n};\n\n/**\n * Adds a listener for widget interaction events (for example, button taps).\n * @param listener Callback function to handle user interaction events.\n * @return An event subscription that can be used to remove the listener.\n */\nexport function addUserInteractionListener(\n  listener: ExpoWidgetsEvents['onExpoWidgetsUserInteraction']\n): EventSubscription {\n  return ExpoWidgetModule.addListener('onExpoWidgetsUserInteraction', listener);\n}\n\n/**\n * Adds a listener for push-to-start token events.\n * This token can be used to start live activities remotely via APNs.\n * @param listener Callback function to handle push-to-start token events.\n * @return An event subscription that can be used to remove the listener.\n */\nexport function addPushToStartTokenListener(\n  listener: ExpoWidgetsEvents['onExpoWidgetsPushToStartTokenReceived']\n): EventSubscription {\n  return ExpoWidgetModule.addListener('onExpoWidgetsPushToStartTokenReceived', listener);\n}\n\n/**\n * Ends a live activity.\n * @param activityId The ID of the live activity to end.\n * @param dismissalPolicy How the live activity should be dismissed from the screen.\n */\nexport function endLiveActivity(\n  activityId: string,\n  dismissalPolicy: LiveActivityDismissalPolicy = 'default'\n): void {\n  return ExpoWidgetModule.endLiveActivity(activityId, dismissalPolicy);\n}\n\n/**\n * Adds a listener for push token updates.\n * @param listener Callback function to handle push token updates.\n * @return An event subscription that can be used to remove the listener.\n */\nexport function addPushTokenListener(\n  listener: ExpoWidgetsEvents['onExpoWidgetsTokenReceived']\n): EventSubscription {\n  return ExpoWidgetModule.addListener('onExpoWidgetsTokenReceived', listener);\n}\n\n/**\n * Gets the push token for a specific live activity.\n * @param activityId The ID of the live activity.\n * @return A promise that resolves to the push token, or null if not available.\n */\nexport async function getLiveActivityPushToken(activityId: string): Promise<string | null> {\n  return ExpoWidgetModule.getLiveActivityPushToken(activityId);\n}\n\n/**\n * Gets all currently running live activities.\n * @return An array of live activity information objects.\n */\nexport function getLiveActivities(): LiveActivityInfo[] {\n  return ExpoWidgetModule.getLiveActivities();\n}\n\n/**\n * Registers a widget layout for a given widget name.\n * @param name The name/identifier of the widget.\n * @param widget A React component that renders the widget layout marked with `'widget'` directive.\n */\nexport function registerWidgetLayout<T extends object>(\n  name: string,\n  widget: (props: WidgetBase<T>) => React.JSX.Element\n): void {\n  ExpoWidgetModule.registerWidgetLayout(name, widget as unknown as string);\n  ExpoWidgetModule.reloadWidget(name);\n}\n\n/**\n * Registers a Live Activity layout for a given activity name.\n * @param name The name/identifier of the Live Activity.\n * @param widget A function that returns the Live Activity layout marked with `'widget'` directive.\n */\nexport function registerLiveActivityLayout<T extends object>(\n  name: string,\n  widget: (props: T) => ExpoLiveActivityEntry\n): void {\n  ExpoWidgetModule.registerLiveActivityLayout(name, widget as unknown as string);\n}\n"]}